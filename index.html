<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Target Number Game</title>

<style>
:root{
  --bg1:#1a6ed8;
  --bg2:#3fa9f5;
  --panel:#0f2f57;

  --num:#1f8fff;
  --numShadow:#0c4fa3;

  --opAdd:#2ecc71;
  --opSub:#f39c12;
  --opMul:#9b59b6;
  --opDiv:#e74c3c;

  --btn:#34495e;
  --btnShadow:#1f2d3a;
  --white:#fff;
}

html,body{
  height:100%;margin:0;
  font-family:system-ui,sans-serif;
  background:linear-gradient(160deg,var(--bg1),var(--bg2));
  display:flex;align-items:center;justify-content:center;
  color:white;
}

.container{
  width:960px;max-width:96vw;
  background:var(--panel);
  padding:18px;border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.45);
  position:relative;
}

.header{
  display:flex;justify-content:space-between;align-items:center;
}

.settings{
  display:flex;gap:8px;align-items:center;
}

select, .btn{
  padding:8px 12px;
  border-radius:10px;
  border:none;
  background:#224a7c;
  color:white;
  font-weight:700;
}

.row{
  display:flex;justify-content:center;align-items:center;
  gap:14px;margin:16px 0;flex-wrap:wrap;
}

.target{
  background:#08213f;
  padding:10px 18px;
  border-radius:10px;
  font-size:30px;font-weight:900;
  color:#ff7676;min-width:90px;text-align:center;
}

.num,.op,.btn{
  cursor:pointer;
  border:none;
  border-radius:16px;
  font-weight:800;
  transition:transform .05s, box-shadow .05s, filter .05s;
}

.num{
  min-width:150px;
  padding:30px;
  font-size:42px;
  background:var(--num);
  box-shadow:0 8px var(--numShadow);
}

.op{
  min-width:100px;
  padding:26px;
  font-size:34px;
  box-shadow:0 7px rgba(0,0,0,.35);
}

.op.add{background:var(--opAdd);}
.op.sub{background:var(--opSub);}
.op.mul{background:var(--opMul);}
.op.div{background:var(--opDiv);}

.btn{
  background:var(--btn);
  box-shadow:0 6px var(--btnShadow);
}

.num:active,.op:active,.btn:active{
  transform:translateY(4px);
  box-shadow:0 3px rgba(0,0,0,.4);
}

.selected{filter:brightness(1.35);}
.disabled{opacity:.4;pointer-events:none;}

.solutionBox{
  margin-top:10px;
  background:rgba(0,0,0,.35);
  padding:10px;border-radius:8px;
}

.fireworks{
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
  font-size:64px;pointer-events:none;
  animation:pop 2s ease-out forwards;
}
@keyframes pop{
  0%{opacity:0;transform:scale(.6);}
  20%{opacity:1;transform:scale(1);}
  100%{opacity:0;}
}
</style>
</head>

<body>
<div class="container">
  <div class="header">
    <div><b>Target Number Game</b></div>
    <div class="settings">
      <button id="newGameBtn" class="btn">New Game</button>
      Mode
      <select id="modeSelect">
        <option value="4">4</option>
        <option value="3">3</option>
      </select>
      Max
      <select id="maxSelect">
        <option value="99">99</option>
        <option value="50">50</option>
      </select>
      <button id="startBtn" class="btn">Start</button>
    </div>
  </div>

  <div class="row">
    Target <div class="target" id="targetValue">--</div>
    Score <span id="score">0</span>
    Problem <span id="problems">0/10</span>
  </div>

  <div class="row">
    <button class="op add" data-op="+">+</button>
    <button class="op sub" data-op="-">âˆ’</button>
    <button class="op mul" data-op="*">Ã—</button>
    <button class="op div" data-op="/">Ã·</button>
  </div>

  <div class="row" id="numbersRow"></div>

  <div class="row">
    <button id="hintBtn" class="btn">Hint</button>
    <button id="solutionBtn" class="btn">Show Solution</button>
    <button id="resetBtn" class="btn">Reset</button>
    <button id="newProblemBtn" class="btn">New Problem</button>
  </div>

  <div id="solutionBox" class="solutionBox" style="display:none"></div>
</div>

<script>
/* ========= Core logic restored ========= */

const randInt = m => Math.floor(Math.random()*(m+1));
function generateNumbers(n){
  const nums=[];
  if(Math.random()<0.25) nums.push(0);
  while(nums.length<n){
    nums.push(randInt(10));
  }
  return nums;
}

const state={
  mode:4,max:99,
  numbers:[],original:[],solution:[],
  target:0,selection:{first:null,op:null},
  score:0,problem:0,
  moveCount:0,usedHint:false,solutionShown:false,
  started:false
};

const numbersRow=document.getElementById('numbersRow');
const targetEl=document.getElementById('targetValue');
const scoreEl=document.getElementById('score');
const problemsEl=document.getElementById('problems');
const hintBtn=document.getElementById('hintBtn');
const resetBtn=document.getElementById('resetBtn');
const solutionBtn=document.getElementById('solutionBtn');
const solutionBox=document.getElementById('solutionBox');

function clearHighlights(){
  document.querySelectorAll('.selected').forEach(b=>b.classList.remove('selected'));
}
function resetSelection(){
  state.selection={first:null,op:null};
  clearHighlights();
}

document.querySelectorAll('.op').forEach(b=>{
  b.onclick=()=>{
    if(state.selection.first===null||state.solutionShown)return;
    clearHighlights();
    b.classList.add('selected');
    state.selection.op=b.dataset.op;
    numbersRow.children[state.selection.first]?.classList.add('selected');
  };
});

/* ========= Auto-advance restored ========= */
function fireworks(){
  const f=document.createElement('div');
  f.className='fireworks';
  f.textContent='ðŸŽ†ðŸŽ‡âœ¨';
  document.querySelector('.container').appendChild(f);
  setTimeout(()=>f.remove(),2000);
}
</script>
</body>
</html>
